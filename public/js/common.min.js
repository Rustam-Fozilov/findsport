var application=function(t,n,i){var e=t.TemplateCache;return e.prototype.loadTemplate=function(t){var e="hbs-"+n.str.camelize(t),e=document.getElementById(e);if(!e)throw new Error('Template "'+t+'" does not exists');return e.innerHTML},e.prototype.compileTemplate=function(t,e){return i.compile(t,e)},new t.Application}((Backbone,Marionette),_,Handlebars);application.module("common.models",function(t,e,n,i,r,o,a){function l(t){this.value=t||0}l.prototype={bits:function(){for(var t=[],e=1;e<=this.value;e<<=1)this.value&e&&t.push(e);return t},positions:function(){for(var t=[],e=0,n=1<<e;n<=this.value;n=1<<(e+=1))this.value&n&&t.push(e);return t}},t.Playground=n.Model.extend({PART_FULL:12,PART_HALF:6,PART_QUARTER:3,PART_THIRD:4,PART_TWO_THIRDS:8,defaults:{id:null,uid:null,name:"",address:"",sport:0,timezone:"UTC",geoX:0,geoY:0,start:0,finish:0,timeStep:3600,weights:0,taxHour:0,paymentOptions:0,confirmation:0,players:0,autocancel:0,courier:0},getAvailableParts:function(){var e={1:this.PART_FULL,2:this.PART_HALF,4:this.PART_QUARTER,8:this.PART_THIRD};return new l(this.get("weights")).bits().map(function(t){return e[t]}).concat(8&this.get("weights")?[this.PART_TWO_THIRDS]:[])}});var s=t.PlaygroundPrice=n.Model.extend({WEEKDAY_MONDAY:2,WEEKDAY_TUESDAY:4,WEEKDAY_WEDNESDAY:8,WEEKDAY_THURSDAY:16,WEEKDAY_FRIDAY:32,WEEKDAY_SATURDAY:64,WEEKDAY_SUNDAY:1,WEEKDAY_ALL:127,defaults:{id:null,pid:null,periodId:null,part:12,weekdays:0,start:0,finish:0,outer:0,inner:0},getWeekdayNumbers:function(){return new l(this.get("weekdays")).positions()}}),u=t.PlaygroundPricePeriod=n.Model.extend({defaults:{id:null,pid:null,periodStart:null,periodFinish:null},periodEnd:function(){var t=this.get("periodFinish");return t?a(t).subtract(a.duration("P1D")).format("YYYY-MM-DD"):""},periodLabel:function(){var t=this.get("periodStart"),e=this.get("periodFinish");if(!t||!e)return"";t=a(t),e=a(e).subtract(a.duration("P1D"));return t.isSame(e,"day")?t.format("DD.MM.YYYY"):"{start} â€“ {end}".assign({start:t.format("DD.MM.YYYY"),end:e.format("DD.MM.YYYY")})}});t.PlaygroundPriceCollection=n.Collection.extend({model:s}),t.PlaygroundPricePeriodCollection=n.Collection.extend({model:u})},moment);