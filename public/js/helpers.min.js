!function(e,r,a){var i=e.helpers={},n=e.format={};i.ensureMoment=function(e){return a.isMoment(e)?e:r.isNumeric(e)?a.unix(e):a.utc(e)},i.pluralize=function(e,n){return r.isString(n)&&(n=n.split("|")),n[t=e,(t=Math.abs(t))%10==1&&t%100!=11?0:1<t%10&&t%10<5&&(t%100<10||20<=t%100)?1:2].replace("{n}",e);var t},n.date=function(e,n){var t=a.localeData()._formats;return e=i.ensureMoment(e),(n=n||"date")in t&&(n=t[n]),e.format(n)},n.timeOffset=function(e,n){void 0===n&&(n="%h:%m");var t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=t<10?"0"+t:t,i=r<10?"0"+r:r;return n.replace("%h",a).replace("%m",i)},n.timeOffsetWord=function(e){var n=Math.floor(e/3600),t=Math.floor(e%3600/60);return(0<n?n+" ч. ":"")+(t?(t<10?"0"+t:t)+" мин.":"")},n.phone=function(e){return e?e=(e=e.replace(/[^0-9]/g,"").replace(/^8/,"7")).replace(/^(.)(.{3})(.{3})(.{2})(.+)$/,"+$1 ($2) $3-$4-$5"):""};var t=n.number=function(){var e=r.defaults(arguments,[0,0," ",","]);return r.str.numberFormat.call(null,e)};n.money=function(e,n){return(n=r.extend({decimals:2,decimalSeparator:" ",orderSeparator:",",togglePlace:!0},n)).togglePlace&&r.isInteger(e)&&(n.decimals=0),t(e,n.decimals,n.decimalSeparator,n.orderSeparator)}}(window.FS||(window.FS={}),window._,window.moment),function(e,n,t,r,o){var a,u,i,s,c,l,f,h,p,d,m,v,w,g,y,V,S,A,M,b={},_={},O=b,N=_;if(void 0!==e&&void 0!==n&&void 0!==t&&void 0!==r){for(var x in!function(e,n,t,r){e.emptyOptions=function(){return{hash:{},data:{}}},e.isNoop=function(e){return e===n.VM.noop};var a=e.args=function(e){return t.initial(e)},i=e.opts=function(e){return t.last(e)};e.hash=function(e){return i(e).hash||{}};var u=e.ensureValue=function(e,n){return"function"==typeof n?n.call(e):n},o=e.ensureAllValues=function(n,e){return t.map(e,function(e){return u(n,e)})};e.ensureAllArgsValues=function(e,n){return o(e,a(n))},e.ci=function(e){return String(null==e?"":e).strToLower()};var s=e.result=function(e,n){return e instanceof r.Model&&e.has(n)?e.get(n):e[n]};e.ensureResult=function(e,n){return u(e,s(e,n))};var c=e.matcher=function(n){return"function"==typeof n?n:"object"==typeof n?t.matcher(n):"__empty__"===n?c.emptyMatch:"__undefined__"===n?c.undefinedMatch:"__null__"===n?c.nullMatch:function(e){return e===n}};t.extend(e.matcher,{emptyMatch:function(e){return!!e},undefinedMatch:function(e){return void 0===e},nullMatch:function(e){return null===e}});var l=e.property=function(n){return function(e){s(e,n)}};e.propertyMatcher=function(e,n){return t.compose(c(n),l(e))}}(N,e,n,t),u=N,i=e,s=n,c=t,(a=O).array=function(){return u.hash(arguments).preserve?u.args(arguments):u.ensureAllArgsValues(this,arguments)},a.object=function(){return u.hash(arguments)},a.concat=function(){return u.ensureAllValues(this,s.flatten(u.args(arguments))).join("")},a.join=function(e){var n=s.flatten(s.toArray(arguments).slice(1,-1));return new i.SafeString(u.ensureAllValues(this,n).join(e))},a.filter=function(e,n){var t=n.hash,r=t.iterator,a=s.has(t,"value")?t.value:"__empty__",i=t.attribute,r=r||(i?u.propertyMatcher(i,a):u.matcher(a));return e instanceof c.Collection||(e=s(e)),e.filter(r)},a.call=function(e,n){var t=u.hash(arguments),r=s.toArray(arguments).slice(2,-1);return s.isString(n)&&(n=e[n]),s.isEmpty(t)||r.push(t),n.apply(e,r)},a.apply=function(e,n,t,r){return 3===arguments.length&&(r=t,t=[]),s.isString(n)&&(n=e[n]),s.isEmpty(r.hash)||(t[0]=s.extend({},t[0],r.hash)),n.apply(e,t)},a.consoleLog=function(){console.log.apply(console,u.args(arguments))},function(e,i,t){e.iff=function(e,n,t){var r=i.ensureAllArgsValues(this,arguments);return r[0]?r[1]:r[2]},e.default=function(){for(var e,n=i.ensureAllArgsValues(this,arguments),t=i.hash(arguments).emptyValue||"__empty__",r=i.matcher(t),a=0;a<n.length&&(e=n[a],!r.call(this,e,a));a++);return e},e.not=function(e){return!i.ensureValue(this,e)};var r=e.is=function(e,n){switch(n=i.ensureValue(this,n),e){case"empty":return"number"==typeof n?!n:t.isEmpty(n);case"undefined":return t.isUndefined(n);case"boolean":return t.isBoolean(n);case"number":return t.isNumber(n);case"numeric":return t.isNumeric(n);case"integer":return t.isInteger(n);case"float":return t.isFloat(n);case"string":return t.isString(n);case"array":return t.isArray(n);case"object":return t.isObject(n);case"date":return t.isDate(n);case"null":return t.isNull(n)}return!1};e.isNot=function(e,n){return!r.apply(this,arguments)},e.truely=function(e){return 1==i.ensureValue(this,e)},e.falsely=function(e){return 0==i.ensureValue(this,e)},e.cond=function(e,n,t){switch(e=i.ensureValue(this,e),t=i.ensureValue(this,t),n){case"==":return e==t;case"===":return e===t;case"!=":return e!=t;case"!==":return e!==t;case"<":return e<t;case"<=":return e<=t;case">":return t<e;case">=":return t<=e;case"and":case"&&":return e&&t;case"or":case"||":return e||t}return!1};e.equal=function(e,n){return i.ensureValue(this,e)==i.ensureValue(this,n)},e.notEqual=function(e,n){return i.ensureValue(this,e)!=i.ensureValue(this,n)};var a=e.identical=e.strictEqual=function(e,n){return i.ensureValue(this,e)===i.ensureValue(this,n)},u=e.notIdentical=e.notStrictEqual=function(e,n){return i.ensureValue(this,e)!==i.ensureValue(this,n)};e.equali=function(e,n){return a.call(this,i.ci(i.ensureValue(this,e)),i.ci(i.ensureValue(this,n)))},e.notEquali=function(e,n){return u.call(this,i.ci(i.ensureValue(this,e)),i.ci(i.ensureValue(this,n)))},e.less=function(e,n,t){return e=i.ensureValue(this,e),n=i.ensureValue(this,n),t.hash.equal?e<=n:e<n},e.greater=function(e,n,t){return e=i.ensureValue(this,e),n=i.ensureValue(this,n),t.hash.equal?n<=e:n<e},e.and=e.every=function(){return t.every(i.ensureAllArgsValues(this,arguments),void 0,this)},e.or=e.some=function(){return t.some(i.ensureAllArgsValues(this,arguments),void 0,this)},e.oneOf=function(e){return t.contains(i.ensureAllValues(this,t.toArray(arguments).slice(1,-1)),i.ensureValue(this,e))}}(O,N,n),function(e,r,a,c,n){var i=n.Marionette,u=a.helpers.each;e.each=function(t,e){if(!(t instanceof n.Collection))return u.apply(this,arguments);var r={};return c.each(e.hash,function(e,n){r[n]=!c.isFunction(e)&&c.isFunction(t[e])?t[e]:e}),c.each(r,function(e,n){"function"==typeof t[n]?t=t[n].call(t,e):"function"==typeof e&&(t=e.call(t))}),t instanceof n.Collection&&(t=t.toJSON()),u.call(this,t,e)},e.collection=function(a,t){var r,i=t.hash.as,u=t.fn,e=t.inverse,o=t.data?c.clone(t.data):null,s=this;return c.isFunction(a)&&(a=a.call(this)),a instanceof n.Collection&&a.length?(a=a.chain(),t.hash.sortBy&&(r=t.hash.sortByOptions?t.hash.sortByOptions.split(","):[],a=a.sortBy(function(e){var n=e.get(t.hash.sortBy);return c.contains(r,"ci")?n.toLowerCase():e.get(t.hash.sortBy)})),a.reduce(function(e,n,t){var r=n;return i&&((r=c.clone(s))[i]=n),o&&(o.index=t,o.first=0===t,o.last=t===a.length-1),e+u(r,{data:o})},"").value()):e(this)},e.view=function(e,n,t){if(void 0===t&&(t=n,n=void 0),!t.data||!t.data.view)throw new Error('"View" is not defined in rendering data');var r=t.data.view;if(!r.renderNestedView)throw new Error("Nested views does not implemented in this view");return n=c.extend({},n||{},t.hash),t.fn&&(n.template=t.fn),new a.SafeString(r.renderNestedView(e,n))};e.childView=function(e){var n=c.clone(e.hash),t=e.data.view;if(!c.has(e.data,"view"))throw new Error('View is not defined in helpers "options.data"');if(!(t instanceof i.CollectionView))throw new Error('View is not instance of "Marionette.CollectionView"');return e.fn&&(n.template=e.fn),o(t,"childViewOptions",n),e.inverse&&!r.isNoop(e.inverse)&&o(t,"emptyViewOptions",{template:e.inverse}),""};function o(e,n,t){var r,a,i=e.getOption(n),u={};u[n]="object"==typeof i&&i?c.extend({},i,t):"function"==typeof i?c.wrap(i,function(e){return c.extend({},e.apply(this,arguments),t)}):t,r=e,a=u,c.extend(r.options||r,a)}}(O,N,e,n,t),f=e,h=n,p=(l=O).tag=function(e,n,t){void 0===t&&(t=n,n=void 0);var r=t.hash;void 0!==n&&h.each(n,function(e,n){h.isUndefined(r[n])?r[n]=e:h.isArray(r[n])?r[n]=r[n].concat(h.isArray(e)?e:h.isObject(e)?h.values(e):[e]):h.isObject(r[n])?r[n]=h.extend(r[n],e):r[n]=h.isArray(e)?[r[n]].concat(e):[r[n],e]}),h.each(r,function(e,t){h.isObject(e)&&!h.isArray(e)&&(h.each(e,function(e,n){r[t+"-"+n]=e}),delete r[t])}),h.each(r,function(e,n){var t;h.isArray(e)&&(t="class"===n||"style"===n?" ":",",r[n]=h.flatten(e).join(t,e))});var a="<"+e+h.reduce(r,function(e,n,t){return e+" "+t+'="'+h.escape(n)+'"'},"")+">";return t.fn&&(a+=t.fn(this),a+="</"+e+">"),new f.SafeString(a)},h.each(["div","span"],function(t){l[t]=function(e,n){return p.call(this,t,e,n)}}),l.link=function(e,n,t){return void 0===n&&(n=e,e=""),void 0===t&&(t=n,n={}),n.href=e,p.call(this,"a",n,t)},l.nl2p=function(e,n){return(n=h.extend({encode:!0},n.hash)).encode&&(e=h.escape(e)),e=e.replace(/\n/g,"</p>\n<p>"),new f.SafeString("<p>"+e+"</p>")},l.nl2br=function(e,n){return(n=h.extend({encode:!0},n.hash)).encode&&(e=h.escape(e)),e=e.replace(/\n/g,"\n<br>"),new f.SafeString(e)},m=N,v=e,w=n,g=r,(d=O).isSameDate=function(e,n,t){return e=o.helpers.ensureMoment(m.ensureValue(this,e)),n=m.ensureValue(this,n),w.isString(n)&&w.contains(["yesterday","today","tomorrow"],n)?(t="day",n=function(e){switch(n){case"yesterday":return e.subtract("P1D");case"tomorrow":return e.add("P1D");default:return e}}(g.utc().startOf("day"))):(n=o.helpers.ensureMoment(n),3===arguments.length&&(t=void 0)),e.isSame(n,t||"second")},d.formatDate=function(e,n){return e=o.helpers.ensureMoment(m.ensureValue(this,e)),w.has(n.hash,"toTimezone")&&(e=e.clone().zone(n.hash.toTimezone)),new v.SafeString(o.format.date(e,n.hash.format))},function(t,i,u,r){var a=r.string;t.formatTimeOffset=function(e){return e=o.format.timeOffset(i.ensureValue(this,e)),new u.SafeString(e)},t.formatTimeOffsetWord=function(e){return e=o.format.timeOffsetWord(i.ensureValue(this,e)),new u.SafeString(e)},t.formatTimeOffsetWithZeroOption=function(e,n){var e=i.ensureValue(this,e),t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=(t<10&&!0===n?"0"+t:t)+":"+(r<10?"0"+r:r);return new u.SafeString(a)},t.formatPhone=function(e,n){return e=o.format.phone(i.ensureValue(this,e)),r.has(n.hash,"format")&&"asLink"===n.hash.format&&(e='<a href="tel:+'+e.replace(/\D/g,"")+'">'+e+"</a>"),new u.SafeString(e)},t.formatNumber=function(e,n){if(r.isFunction(e)&&(e=e.call(this)),r.isNumber(e)||(e=parseFloat(e)),isNaN(e))return"";var t={place:void 0,thousands:" ",decimal:", ",togglePlace:!1};return r.extend(t,n.hash),t.togglePlace&&e.isInteger()&&(t.place=0),e.format(t.place,t.thousands,t.decimal)},t.formatMoney=function(e,n){return n.hash.place=2,n.hash.togglePlace=!0,t.formatNumber.call(this,e,n)},t.toLowerCase=function(e,n){return e.toLowerCase()};r.each(["capitalize","camelize","truncate","prune","sprintf","stripTags","toSentence"],function(e){var n=a[e];t[e]=function(){return n.apply(null,i.ensureAllArgsValues(this,arguments))}})}(O,N,e,n),V=e,S=n,A=t,(y=O).highlightSearch=function(e,n,t){return new V.SafeString(S.escape(e).replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+S.escape(n)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<span style='color:red'>$1</span>"))},y.pluralize=function(e,n){return o.helpers.pluralize(e,n)},y.browserSupports=function(e){return!!A.$.support[e]},M=n,O.math=function(e,n,t,r){if(e=parseFloat(e),t=parseFloat(t),M.isNaN(e)||M.isNaN(t))throw new Error("Invalid operand");return{"+":e+t,"-":e-t,"*":e*t,"/":e/t,"%":e%t}[n]},b)b.hasOwnProperty(x)&&e.registerHelper(x,b[x]);e.functions=_}}(window.Handlebars,window._,window.Backbone,window.moment,window.FS);
